<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo to Sketch Converter Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        canvas {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

    <div class="max-w-4xl mx-auto p-6">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Sketsa Lukis AI Pro</h1>
            <p class="text-gray-600">Ubah foto Anda menjadi sketsa garis artistik dalam sekejap</p>
        </header>

        <div class="bg-white rounded-2xl shadow-xl p-8">
            <!-- Upload Area -->
            <div id="upload-container" class="border-2 border-dashed border-gray-300 rounded-xl p-10 text-center cursor-pointer hover:border-blue-500 transition-colors">
                <input type="file" id="file-input" class="hidden" accept="image/*">
                <div id="upload-prompt">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <p class="mt-4 text-lg text-gray-700 font-medium">Klik untuk pilih foto atau seret ke sini</p>
                    <p class="text-sm text-gray-500">Mendukung format JPG, PNG, atau WEBP</p>
                </div>
            </div>

            <!-- Preview & Controls -->
            <div id="editor-container" class="hidden space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-2">
                        <p class="font-semibold text-gray-700">Foto Asli</p>
                        <div class="rounded-lg overflow-hidden bg-gray-100 border h-64 flex items-center justify-center">
                            <img id="source-preview" class="max-h-full object-contain">
                        </div>
                    </div>
                    <div class="space-y-2">
                        <p class="font-semibold text-gray-700">Hasil Sketsa AI</p>
                        <div id="result-container" class="rounded-lg overflow-hidden bg-white border h-64 flex items-center justify-center relative">
                            <img id="sketch-result" class="max-h-full object-contain hidden">
                            <div id="loading-overlay" class="hidden flex flex-col items-center">
                                <div class="loader mb-2"></div>
                                <p class="text-sm text-blue-600 font-medium">Memproses sketsa...</p>
                            </div>
                            <div id="empty-result" class="text-gray-400 italic text-sm">Klik "Buat Sketsa" untuk memproses</div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row items-center justify-between gap-4 p-4 bg-blue-50 rounded-xl">
                    <div class="flex-1 w-full">
                        <label class="block text-sm font-medium text-blue-800 mb-1">Gaya Sketsa</label>
                        <select id="sketch-style" class="w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="detailed pencil sketch">Sketsa Pensil Detail</option>
                            <option value="minimalist outline drawing">Garis Outline Minimalis</option>
                            <option value="charcoal portrait style">Gaya Potret Arang (Charcoal)</option>
                            <option value="architectural ink drawing">Gambar Tinta Arsitektural</option>
                        </select>
                    </div>
                    <div class="flex gap-2 w-full sm:w-auto">
                        <button id="generate-btn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all transform active:scale-95 shadow-md">
                            Buat Sketsa
                        </button>
                        <button id="download-btn" disabled class="disabled:bg-gray-300 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md">
                            Unduh
                        </button>
                    </div>
                </div>
                
                <div class="text-center">
                    <button id="reset-btn" class="text-sm text-gray-500 hover:text-red-500 underline">Ganti Gambar</button>
                </div>
            </div>
        </div>

        <div id="error-box" class="hidden mt-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded shadow">
            <p id="error-message"></p>
        </div>
    </div>

    <script>
    function _0x95e9(e,t){const n=_0xade3();return _0x95e9=function(e,t){return n[e-=0]},_0x95e9(e,t)}!function(){function e(e,t){return _0x95e9(e- -69,t)}const t=_0xade3();for(;;)try{if(186521===-parseInt(e(-50,-56))/1*(parseInt(e(-26,-60))/2)+-parseInt(e(1,37))/3+-parseInt(e(-4,-6))/4+-parseInt(e(-42,-21))/5*(parseInt(e(-16,-13))/6)+parseInt(e(-32,-12))/7*(parseInt(e(-45,-39))/8)+-parseInt(e(-36,-38))/9*(parseInt(e(-5,6))/10)+parseInt(e(-25,-6))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const _0x4e0aa7=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const o=n[(e=-538,r=-517,_0x95e9(e- -545,r))](t,arguments);return n=null,o}var e,r}:function(){};return e=!1,r}}(),_0x41d8d9=_0x4e0aa7(this,function(){function e(e,t){return _0x95e9(e- -479,t)}return _0x41d8d9[e(-412,-435)]().search(e(-448,-413))[e(-412,-403)]()[e(-419,-399)](_0x41d8d9)[e(-408,-411)](e(-448,-447))});_0x41d8d9();const _0x374a2f=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const o=n[(e=453,r=435,_0x95e9(r-428,e))](t,arguments);return n=null,o}var e,r}:function(){};return e=!1,r}}(),_0x1664f8=_0x374a2f(this,function(){const e=function(){let e;try{e=Function("return (function() "+(_0x95e9(-330- -358,-342)+");"))()}catch(t){e=window}return e}(),t=e[n(-924,-930)]=e[n(-935,-930)]||{};function n(e,t){return _0x95e9(t- -935,e)}const r=[n(-861,-881),n(-931,-921),n(-876,-912),n(-933,-924),n(-939,-929),n(-872,-894),n(-852,-869)];for(let e=0;e<r[n(-905,-935)];e++){const o=_0x374a2f[n(-906,-875)].prototype[n(-878,-897)](_0x374a2f),a=r[e],i=t[a]||o;o[n(-896,-900)]=_0x374a2f[n(-920,-897)](_0x374a2f),o[n(-849,-868)]=i[n(-898,-868)][n(-862,-897)](i),t[a]=o}});function _0xade3(){const e=["target","info","56qYUkGc","border-blue-500","pow","1555TVRbFi",'{}.constructor("return this")( )',"Convert this image into a professional ","content","(((.+)+)+)+$","API Error","2763EgGPFw","preventDefault","__proto__","generate-btn","196070EytsTi","bind","loading-overlay","href","table","parts","54112iKqPfS","6667012miMbTr","inlineData","addEventListener","files","sketch-style","POST","download","add","disabled","2214jtjFkl","log","AIzaSyC_23qbdBFej88G4Rz_Va28YeemNJqQokc","empty-result","reset-btn","textContent","click","constructor","dragleave","find","classList","340OuQktU","1129600DVMHRF","trace","toString","remove","upload-container","542964rwKUNt","search","download-btn","length","change","stringify","data:image/png;base64,","hidden","console","exception","apply","getElementById","createElement","dragover","error","result","readAsDataURL","warn","onload","https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=","Gagal memproses gambar. Silakan coba lagi.","src","1UvWXPC","drop","error-box"];return(_0xade3=function(){return e})()}_0x1664f8();const apiKey=_0x25b535(-771,-747),fileInput=document.getElementById("file-input"),uploadContainer=document[_0x25b535(-818,-782)](_0x25b535(-757,-758)),editorContainer=document.getElementById("editor-container"),sourcePreview=document[_0x25b535(-818,-795)]("source-preview"),sketchResult=document[_0x25b535(-818,-842)]("sketch-result"),generateBtn=document.getElementById(_0x25b535(-790,-807)),downloadBtn=document.getElementById(_0x25b535(-754,-785)),loadingOverlay=document[_0x25b535(-818,-786)](_0x25b535(-787,-781)),emptyResult=document[_0x25b535(-818,-842)](_0x25b535(-770,-763)),errorBox=document.getElementById(_0x25b535(-805,-832)),errorMessage=document[_0x25b535(-818,-825)]("error-message"),resetBtn=document[_0x25b535(-818,-804)](_0x25b535(-769,-785)),sketchStyle=document[_0x25b535(-818,-800)](_0x25b535(-778,-805));let originalBase64=null;function handleFile(e){const t=e.target[n(-639,-605)][0];function n(e,t){return _0x95e9(e- -686,t)}if(!t)return;const r=new FileReader;r[n(-671,-644)]=e=>{function t(e,t){return _0x95e9(e- -510,t)}originalBase64=e[t(-488,-522)][t(-498,-532)].split(",")[1],sourcePreview.src=e.target[t(-498,-471)],uploadContainer[t(-447,-430)].add(t(-506,-482)),editorContainer.classList[t(-442,-420)](t(-506,-483)),sketchResult[t(-447,-454)][t(-459,-472)](t(-506,-483)),emptyResult[t(-447,-448)][t(-442,-429)](t(-506,-514)),downloadBtn[t(-458,-429)]=!0,errorBox[t(-447,-412)][t(-459,-475)](t(-506,-489))},r[n(-673,-699)](t)}function _0x25b535(e,t){return _0x95e9(e- -826,t)}async function callAI(e,t,n=0){const r=a(292,291)+apiKey,o={contents:[{parts:[{text:e},{inlineData:{mimeType:"image/png",data:t}}]}],generationConfig:{responseModalities:["IMAGE"]}};function a(e,t){return _0x95e9(e-276,t)}try{const e=await fetch(r,{method:a(325,347),headers:{"Content-Type":"application/json"},body:JSON[a(278,296)](o)});if(!e.ok)throw new Error(a(308,331));const t=await e.json(),n=t.candidates?.[0]?.[a(306,296)]?.[a(318,352)]?.[a(338,329)](e=>e.inlineData)?.[a(321,295)]?.data;if(!n)throw new Error("No image returned");return n}catch(r){if(n<5){const r=1e3*Math[a(302,334)](2,n);return await new Promise(e=>setTimeout(e,r)),callAI(e,t,n+1)}throw r}}function showError(e){function t(e,t){return _0x95e9(t-450,e)}errorMessage[t(540,508)]=e,errorBox[t(545,513)][t(520,518)](t(457,454))}uploadContainer[_0x25b535(-780,-809)](_0x25b535(-767,-765),()=>fileInput.click()),fileInput.addEventListener(_0x25b535(-825,-807),handleFile),resetBtn.addEventListener("click",()=>{function e(e,t){return _0x95e9(e- -34,t)}fileInput.value="",uploadContainer[e(29,13)][e(34,70)](e(-30,-5)),editorContainer[e(29,54)].add(e(-30,1)),errorBox.classList[e(17,4)](e(-30,-15))}),generateBtn[_0x25b535(-780,-753)](_0x25b535(-767,-746),async()=>{if(!originalBase64)return;function e(e,t){return _0x95e9(e- -456,t)}loadingOverlay[e(-393,-411)][e(-388,-363)](e(-452,-417)),emptyResult.classList.add("hidden"),sketchResult[e(-393,-415)][e(-405,-374)](e(-452,-463)),generateBtn[e(-404,-432)]=!0,errorBox.classList[e(-405,-408)](e(-452,-471));const t=sketchStyle.value,n=e(-427,-415)+t+". \n                           Use clean black lines on a pure white background. \n                           Focus on the edges and main features, making it look like a hand-drawn artistic sketch for painting. \n                           No colors, just black and white pencil/ink work.";try{const t=await callAI(n,originalBase64);t&&(sketchResult.src=e(-453,-422)+t,sketchResult[e(-393,-382)].remove("hidden"),downloadBtn[e(-404,-431)]=!1)}catch(t){showError(e(-439,-423))}finally{loadingOverlay.classList[e(-405,-396)]("hidden"),generateBtn[e(-404,-397)]=!1}}),downloadBtn[_0x25b535(-780,-773)]("click",()=>{const e=document[t(-465,-448)]("a");function t(e,t){return _0x95e9(t- -457,e)}e[t(-425,-417)]=sketchResult[t(-440,-439)],e[t(-413,-407)]="sketsa-lukisan.png",e[t(-411,-398)]()}),uploadContainer[_0x25b535(-780,-771)](_0x25b535(-816,-784),e=>{function t(e,t){return _0x95e9(e-21,t)}e.preventDefault(),uploadContainer[t(84,64)][t(72,54)](t(46,81))}),uploadContainer[_0x25b535(-780,-763)](_0x25b535(-765,-779),()=>{function e(e,t){return _0x95e9(t-335,e)}uploadContainer[e(367,398)].remove(e(381,360))}),uploadContainer[_0x25b535(-780,-764)](_0x25b535(-806,-787),e=>{function t(e,t){return _0x95e9(t-231,e)}e[t(290,265)](),uploadContainer.classList.remove(t(246,256));const n=e.dataTransfer[t(291,278)];n[t(241,231)]>0&&(fileInput[t(274,278)]=n,handleFile({target:{files:n}}))});
    </script>
</body>
</html>
